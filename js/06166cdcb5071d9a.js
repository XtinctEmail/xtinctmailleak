(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,792527,98880,e=>{"use strict";var t=e.i(843476),a=e.i(271645);async function r(e,t){let a=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t?.headers||{}}});if(!a.ok){let e=Error(await a.text());throw e.status=a.status,e}return await a.json()}async function s(e,t,a="email_message"){return r("/api/stars/toggle",{method:"POST",body:JSON.stringify({messageId:e,starred:t,entityType:a})})}async function i(e){let t=await fetch(`/api/attachments/list?emailId=${encodeURIComponent(e)}`);if(!t.ok)throw Error(await t.text());return(await t.json()).attachments||[]}async function n(e){return r("/api/attachments/redact",{method:"POST",body:JSON.stringify({attachmentId:e})})}async function o(){let e=await fetch("/api/admin/is-admin");return!!e.ok&&(await e.json()).isAdmin}async function l(e,t,a){return r("/api/redactions/range",{method:"POST",body:JSON.stringify({emailId:e,startOffset:t,endOffset:a})})}async function c(e){return r("/api/redactions/unredacted",{method:"POST",body:JSON.stringify({emailId:e})})}async function d(e){return r("/api/redactions/undo",{method:"POST",body:JSON.stringify({emailId:e})})}e.s(["checkIsAdmin",()=>o,"getAttachmentsForEmail",()=>i,"getUnredactedContent",()=>c,"redactAttachment",()=>n,"redactTextRange",()=>l,"toggleStar",()=>s,"undoAllRedactions",()=>d],98880);var h=e.i(767002);function m({messageId:e,starCount:r=0}){let{userStarredIds:i,toggleLocalStar:n,hasMounted:o}=(0,h.useStars)(),[l,c]=(0,a.useTransition)(),[d,m]=(0,a.useState)(r),[u,p]=(0,a.useOptimistic)(d,(e,t)=>Math.max(0,e+t)),g=o&&i.has(e);return(0,t.jsxs)("button",{type:"button",className:"inbox-star-btn",onClick:t=>{if(t.preventDefault(),t.stopPropagation(),l)return;let a=g?-1:1;n(e),c(async()=>{p(a);try{let t=await s(e,!g,"email_message");m(t.count)}catch(t){n(e),p(-a)}})},children:[(0,t.jsx)("i",{className:"material-icons star-icon",style:{color:g?"#f4b400":"#5f6368"},children:g?"star":"star_border"}),u>0&&(0,t.jsx)("span",{className:"thread-star-count",children:u})]})}e.s(["StarButton",()=>m],792527)},647163,e=>{"use strict";function t(e){let t=["#db4437","#ff6d01","#f39c12","#0f9d58","#00acc1","#4285f4","#9c27b0","#673ab7"],a=0;for(let t=0;t<e.length;t++)a=e.charCodeAt(t)+((a<<5)-a);return t[Math.abs(a)%t.length]}function a(e){if(!e)return{name:"",email:"",firstName:""};let t=e.match(/^(.*?)\s*<(.+)>$/);if(t){let e=t[1].trim().replace(/^["']|["']$/g,""),a=t[2].trim(),r=e.split(" ")[0]||e;return{name:e,email:a,firstName:r}}return{name:e,email:e,firstName:e}}function r(e,t){let a=new Date(e),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return t?`${r} ${s}`:`${r} ${s}, ${a.getFullYear()}`}function s(e){let t=new Date(e),a=t.getHours(),r=t.getMinutes(),s=a>=12?"PM":"AM";return a%=12,a=a||12,`${a}:${r<10?"0"+r:r} ${s}`}function i(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function n(e){return e.startsWith("image/")?"image":"application/pdf"===e?"picture_as_pdf":e.includes("word")||e.includes("document")?"description":e.includes("excel")||e.includes("spreadsheet")?"table_chart":e.includes("text")?"article":"insert_drive_file"}function o(e){return e.startsWith("image/")}function l(e){return e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<link[^>]*>/gi,"").replace(/<html[^>]*>/gi,"").replace(/<\/html>/gi,"").replace(/<head[^>]*>[\s\S]*?<\/head>/gi,"").replace(/<body[^>]*>/gi,"").replace(/<\/body>/gi,"").replace(/<!DOCTYPE[^>]*>/gi,"").replace(/<\?xml[^>]*\?>/gi,"")}function c(e){let t,a=/<span[^>]*victim-redaction[^>]*>[\s\S]*?<\/span>/g,r=[],s=0;for(;null!==(t=a.exec(e));)t.index>s&&r.push(d(e.slice(s,t.index))),r.push(t[0]),s=a.lastIndex;return s<e.length&&r.push(d(e.slice(s))),r.join("")}function d(e){return e.replace(/\u2588{2,}/g,'<span class="victim-redaction" title="Redacted: likely the name of a victim">$&</span>')}function h(e){return c(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))}let m={pdf:"pdf",jpg:"image",jpeg:"image",png:"image",gif:"image",webp:"image",bmp:"image",tiff:"image",tif:"image",mp4:"video",mov:"video",avi:"video",webm:"video",mkv:"video",wmv:"video",wav:"audio",mp3:"audio",m4a:"audio",aac:"audio",ogg:"audio",flac:"audio",xlsx:"spreadsheet",xls:"spreadsheet",csv:"spreadsheet",zip:"archive",rar:"archive","7z":"archive",tar:"archive",gz:"archive"};function u(e){return e&&m[e.toLowerCase().slice(e.lastIndexOf(".")+1)]||"unknown"}function p(e){switch(e){case"pdf":return"picture_as_pdf";case"image":return"image";case"video":return"videocam";case"audio":return"volume_up";case"spreadsheet":return"space_dashboard";case"archive":return"folder_zip";default:return"insert_drive_file"}}function g(e){switch(e){case"pdf":return"PDFs";case"image":return"Images";case"video":return"Videos";case"audio":return"Audio";case"spreadsheet":return"Spreadsheets";case"archive":return"Archives";default:return"Other"}}function f(e){switch(e){case"pdf":return"#ea4335";case"image":return"#4285f4";case"video":return"#9c27b0";case"audio":return"#ff9800";case"spreadsheet":return"#34a853";case"archive":return"#795548";default:return"#5f6368"}}e.s(["annotateRedactionBlocks",()=>c,"formatDate",()=>r,"formatFileSize",()=>i,"formatTime",()=>s,"getAvatarColor",()=>t,"getDocumentType",()=>u,"getDocumentTypeColor",()=>f,"getDocumentTypeIcon",()=>p,"getDocumentTypeLabel",()=>g,"getFileIcon",()=>n,"isImage",()=>o,"parseEmailString",()=>a,"safeAnnotateRedactionBlocks",()=>h,"sanitizeEmailHtml",()=>l])},767002,e=>{"use strict";var t=e.i(843476),a=e.i(271645);let r="jmail-starred-ids",s=(0,a.createContext)({userStarredIds:new Set,toggleStar:()=>{},toggleLocalStar:()=>{},hasMounted:!1});function i({children:e}){let[i,n]=(0,a.useState)(new Set),[o,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(r);e&&n(new Set(JSON.parse(e)))}catch{}l(!0)},[]);let c=(0,a.useCallback)(e=>{n(t=>{let a=new Set(t);a.has(e)?a.delete(e):a.add(e);try{localStorage.setItem(r,JSON.stringify([...a]))}catch{}return a})},[]),d=(0,a.useMemo)(()=>({userStarredIds:i,toggleStar:c,toggleLocalStar:c,hasMounted:o}),[i,c,o]);return(0,t.jsx)(s.Provider,{value:d,children:e})}e.s(["StarProvider",()=>i,"useStars",0,()=>(0,a.useContext)(s)])},592323,e=>{"use strict";let t=["jeevacation@gmail.com","jeeproject@yahoo.com"];function a(e,a){return!!e||!!a&&t.includes(a)}e.s(["CONTACT_FILTERS",0,[{name:"Elon Musk",keywords:["elon musk","elon"],description:"CEO of Tesla and SpaceX",sources:["doj"]},{name:"Ehud Barak",keywords:["ehud barak","ehbarak","ehud.barak"],description:"Former Prime Minister of Israel",shortDescription:"Former Israeli PM",sources:["gmail","yahoo","doj"]},{name:"Ghislaine Maxwell",keywords:["g maxwell","gmax","gmax1@ellmax"],description:"British socialite and Epstein's primary accomplice",shortDescription:"Epstein's primary accomplice",sources:["gmail","yahoo"]},{name:"Peter Thiel",keywords:["peter thiel","thiel"],description:"PayPal co-founder, Palantir co-founder, and venture capitalist",shortDescription:"PayPal/Palantir co-founder",sources:["doj"]},{name:"Larry Summers",keywords:["larry summers","lawrence summers","lhs"],description:"Former U.S. Treasury Secretary and Harvard president",shortDescription:"Former Treasury Secretary",sources:["gmail"]},{name:"Steve Bannon",keywords:["bannon"],description:"Former White House chief strategist and Breitbart executive",shortDescription:"Former White House strategist",sources:["gmail"]},{name:"Masha Bucher",keywords:["masha drokova","drokova"],description:"Russian-American venture capitalist, formerly PR for Jeffrey Epstein (née Drokova)",shortDescription:"VC, formerly PR for Epstein",sources:["gmail"]},{name:"Michael Wolff",keywords:["michael wolff"],description:'Author and journalist who wrote "Fire and Fury"',shortDescription:'Author, "Fire and Fury"',sources:["gmail"]},{name:"Bill Gates",keywords:["bill gates","gates"],description:"Microsoft co-founder and philanthropist",shortDescription:"Microsoft co-founder",sources:["gmail"]},{name:"Noam Chomsky",keywords:["chomsky"],description:"MIT linguist and political commentator",sources:["gmail"]},{name:"Tom Pritzker",keywords:["pritzker"],description:"Billionaire businessman and Hyatt Hotels executive chairman",shortDescription:"Hyatt Hotels chairman",sources:["gmail"]},{name:"Alan Dershowitz",keywords:["dershowitz"],description:"Harvard Law professor and defense attorney",shortDescription:"Harvard Law professor",sources:["gmail"]},{name:"Al Seckel",keywords:["seckel"],description:"Perceptual psychologist and illusion expert",sources:["gmail"]},{name:"Kimbal Musk",keywords:["kimbal musk","kimbal","kimball"],description:"Restaurateur and entrepreneur, brother of Elon Musk",shortDescription:"Entrepreneur, Elon's brother",sources:["gmail"]},{name:"Karyna Shuliak",keywords:["karyna","shuliak"],description:"Belarusian model and dentist, Epstein's girlfriend until his death in 2019",shortDescription:"Epstein's girlfriend until death",sources:["gmail","yahoo"]},{name:"Deepak Chopra",keywords:["deepak chopra","deepak"],description:"Author and alternative medicine advocate",shortDescription:"Author, alt medicine",sources:["gmail"]},{name:"Ken Starr",keywords:["starr"],description:"Former U.S. Solicitor General and independent counsel",shortDescription:"Former Solicitor General",sources:["gmail"]},{name:"Peter Attia",keywords:["peter attia","attia"],description:"Physician specializing in longevity and health optimization",shortDescription:"Longevity physician",sources:["gmail"]},{name:"Jeremy Rubin",keywords:["jeremy rubin"],description:"Bitcoin developer and cryptocurrency researcher",shortDescription:"Bitcoin developer",sources:["gmail"]},{name:"Neri Oxman",keywords:["neri oxman","oxman"],description:"MIT Media Lab professor and designer",shortDescription:"MIT Media Lab designer",sources:["gmail"]},{name:"Marvin Minsky",keywords:["minsky","minsky@media.mit.edu"],description:'MIT professor, helped coin the phrase "Artificial Intelligence"',shortDescription:"MIT AI pioneer",sources:["gmail","yahoo"]},{name:"Lawrence Krauss",keywords:["lawrence krauss","krauss"],description:"Theoretical physicist and cosmologist",shortDescription:"Physicist, cosmologist",sources:["gmail"]},{name:"Seth Lloyd",keywords:["seth lloyd"],description:"MIT professor and quantum computing pioneer",shortDescription:"MIT quantum computing",sources:["gmail"]},{name:"Boris Nikolic",keywords:["boris","nikolic"],description:"Scientific advisor to Bill Gates, named successor executor in Epstein's will 2 days before his death",shortDescription:"Gates advisor, will executor",sources:["gmail","yahoo"]},{name:"Jean Luc Brunel",keywords:["jean luc","brunel","jeanluc@mc2mm"],description:"French model scout, close accomplice of Epstein",shortDescription:"French model scout",sources:["gmail","yahoo"]},{name:"Lesley Groff",keywords:["lesley groff","lesley@nysgllc"],description:"Personal assistant and office manager at Epstein's New York office",shortDescription:"Personal assistant, NY office",sources:["gmail","yahoo"]},{name:"Sarah Kellen",keywords:["kellen","kellens@earthlink"],description:"Personal assistant and scheduler",sources:["gmail","yahoo"]},{name:"Nadia Marcinkova",keywords:["nadia","marcinkova","nadja2102"],description:"Pilot and personal assistant",sources:["gmail","yahoo"]},{name:"Darren Indyke",keywords:["dkiesq","darren indyke"],description:"Attorney and co-executor of Epstein's estate",shortDescription:"Attorney, estate executor",sources:["gmail","yahoo"]},{name:"Mark Epstein",keywords:["mark epstein","izmo@mindspring"],description:"Jeffrey Epstein's brother",shortDescription:"Epstein's brother",sources:["gmail","yahoo"]},{name:"Emad Hanna",keywords:["ehanna","emad hanna"],description:"Staff at Epstein's New York office",shortDescription:"NY office staff",sources:["yahoo"]},{name:"Joscha Bach",keywords:["joscha bach","joscha"],description:"AI researcher and cognitive scientist",sources:["gmail","doj"]},{name:"Rich Kahn",keywords:["rkahn","rich kahn"],description:"Staff at Epstein's New York office",shortDescription:"NY office staff",sources:["yahoo"]},{name:"Cecilia Steen",keywords:["cecilia steen","cecilia.steen"],description:"Personal contact and correspondent",sources:["yahoo"]},{name:"John Amerling",keywords:["john amerling","john_amerling"],description:"Business contact",sources:["yahoo"]},{name:"Sultan Bin Sulayem",keywords:["sulayem","ssulayem"],description:"Dubai businessman and chairman of DP World",shortDescription:"Dubai businessman, DP World",sources:["yahoo"]},{name:"Jeffrey Epstein (alias)",keywords:["littlestjeff"],description:"Alternate email account",sources:["yahoo"]}],"isFromEpstein",()=>a])},940141,e=>{"use strict";var t=e.i(271645),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=t.default.createContext&&t.default.createContext(a),s=["attr","size","title"];function i(){return(i=Object.assign.bind()).apply(this,arguments)}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){var r,s,i;r=e,s=t,i=a[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function l(e){return a=>t.default.createElement(c,i({attr:o({},e.attr)},a),function e(a){return a&&a.map((a,r)=>t.default.createElement(a.tag,o({key:r},a.attr),e(a.child)))}(e.child))}function c(e){var n=a=>{var r,{attr:n,size:l,title:c}=e,d=function(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,s),h=l||a.size||"1em";return a.className&&(r=a.className),e.className&&(r=(r?r+" ":"")+e.className),t.default.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,n,d,{className:r,style:o(o({color:e.color||a.color},a.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&t.default.createElement("title",null,c),e.children)};return void 0!==r?t.default.createElement(r.Consumer,null,e=>n(e)):n(a)}e.s(["GenIcon",()=>l],940141)},755838,(e,t,a)=>{"use strict";var r=e.r(271645),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,n=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!s(e,a)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=i({inst:{value:a,getSnapshot:t}}),s=r[0].inst,d=r[1];return o(function(){s.value=a,s.getSnapshot=t,c(s)&&d({inst:s})},[e,a,t]),n(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),l(a),a};a.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},802239,(e,t,a)=>{"use strict";t.exports=e.r(755838)},667585,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let r=e.r(132061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},309885,(e,t,a)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"encodeURIPath",{enumerable:!0,get:function(){return r}})},652157,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return l}});let r=e.r(843476),s=e.r(174080),i=e.r(563599),n=e.r(309885),o=e.r(543369);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let a=[];if(t.reactLoadableManifest&&e){let r=t.reactLoadableManifest;for(let t of e){if(!r[t])continue;let e=r[t].files;a.push(...e)}}if(0===a.length)return null;let l=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,r.jsx)(r.Fragment,{children:a.map(e=>{let a=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${l}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:a,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(a,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},869093,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return c}});let r=e.r(843476),s=e.r(271645),i=e.r(667585),n=e.r(652157);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},a=(0,s.lazy)(()=>t.loader().then(o)),c=t.loading;function d(e){let o=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,d=l?s.Suspense:s.Fragment,h=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(a,{...e})]}):(0,r.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(d,{...l?{fallback:o}:{},children:h})}return d.displayName="LoadableComponent",d}},770703,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return s}});let r=e.r(555682)._(e.r(869093));function s(e,t){let a={};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,r.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},142308,e=>{"use strict";var t=e.i(843476),a=e.i(522016);function r({rating:e}){let a=Math.floor(e),r=e-a>=.5;return(0,t.jsxs)("div",{className:"order-star-rating",children:[[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("svg",{className:`order-star ${s<a||s===a&&r?"order-star-filled":"order-star-empty"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s)),(0,t.jsx)("span",{className:"order-rating-value",children:e.toFixed(1)})]})}function s({order:e,compact:s=!1,onClick:i}){let n="verified_match"===e.status,o=n?e.product_title:e.product_name,l=e.price??e.product_price,c=e.product_image??null,d=n?e.amazon_url||e.original_url:null,h=e.order_number||function(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;let a=String(100+(t=Math.abs(t))%900).padStart(3,"0"),r=String(7*t%1e7).padStart(7,"0"),s=String(13*t%1e7).padStart(7,"0");return`${a}-${r}-${s}`}(e.id),m=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"order-card-header",children:(0,t.jsxs)("div",{className:"order-header-row",children:[(0,t.jsxs)("div",{className:"order-header-left",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"order-header-label",children:"Order #"}),e.doc_id&&!s?(0,t.jsx)(a.default,{href:`/thread/${e.doc_id}`,className:"order-link",onClick:e=>e.stopPropagation(),children:h}):(0,t.jsx)("div",{className:"order-number",children:h})]}),e.delivery_date&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"order-header-label",children:"Delivered"}),(0,t.jsx)("div",{className:"order-header-value",children:new Date(e.delivery_date).toLocaleDateString()})]})]}),null!==l&&l>0&&(0,t.jsxs)("div",{className:"order-card-header-right",children:[(0,t.jsx)("span",{className:"order-header-label",children:"Total"}),(0,t.jsxs)("div",{className:"order-price-value",children:["$",l.toFixed(2)]})]})]})}),(0,t.jsxs)("div",{className:"order-card-body",children:[(0,t.jsx)("div",{className:"order-image-container",children:c?(0,t.jsx)("img",{src:c,alt:o||"Product",className:"order-product-image",loading:"lazy"}):(0,t.jsx)("div",{className:"order-no-image",children:"No image"})}),(0,t.jsxs)("div",{className:"order-product-details",children:[d&&!s?(0,t.jsx)(a.default,{href:d,target:"_blank",rel:"noopener noreferrer",className:"order-product-link",onClick:e=>e.stopPropagation(),children:o}):(0,t.jsx)("div",{className:"order-product-title",children:o}),n&&e.product_rating&&e.product_rating>0&&(0,t.jsx)(r,{rating:e.product_rating}),e.quantity>1&&(0,t.jsxs)("div",{className:"order-quantity",children:["Qty: ",e.quantity]}),!n&&(0,t.jsx)("div",{className:"order-badge-container",children:(0,t.jsx)("span",{className:"order-badge order-badge-no-url",children:"No current match"})})]})]})]});return(0,t.jsx)("div",{className:`order-card ${s?"order-card-compact":""}`,onClick:i,style:i?{cursor:"pointer"}:void 0,children:m})}e.s(["OrderCard",()=>s])},444889,e=>{e.v("/_next/static/media/flexsearch.worker.5006b115.ts")},959764,e=>{e.v(e.b(["static/chunks/b296a2fea083d0d1.js","static/chunks/turbopack-3cb89ff4878b6b97.js"]))},380191,e=>{"use strict";class t{worker=null;seq=0;pending=new Map;workerReady=!1;indexedCount=0;threadCount=0;attachmentIndexedCount=0;onIndexedCallback=null;onAttachmentsIndexedCallback=null;currentSource="all";currentShowPostDeath=!1;constructor(e="all",t=!1){this.currentSource=e,this.currentShowPostDeath=t,this.initWorker()}initWorker(){this.worker=new Worker(e.r(959764),{type:"module",type:void 0}),this.worker.addEventListener("message",e=>{this.handleMessage(e.data)}),this.worker.addEventListener("error",e=>{console.error("[SearchManager] worker error",e.message,e)})}handleMessage(e){let{id:t,type:a,payload:r}=e;switch(a){case"ready":this.workerReady=!0,console.log("[SearchManager] worker ready but FlexSearch disabled - using server-side search");break;case"emails-indexed":this.indexedCount=r.count,this.threadCount=r.threadCount,console.log("[SearchManager] indexed",r),this.onIndexedCallback&&this.onIndexedCallback(r),this.resolvePending(t,r);break;case"search-emails-result":case"thread-result":this.resolvePending(t,r);break;case"attachments-indexed":this.attachmentIndexedCount=r.count,console.log("[SearchManager] attachments indexed",r),this.onAttachmentsIndexedCallback&&this.onAttachmentsIndexedCallback(r),this.resolvePending(t,r);break;case"search-attachments-result":this.resolvePending(t,r.results);break;case"error":let s=Error(r?.message||"FlexSearch worker error");"number"==typeof t?this.rejectPending(t,s):console.error("[SearchManager] error",s);break;default:console.warn("[SearchManager] unknown message",e)}}resolvePending(e,t){if("number"!=typeof e)return;let a=this.pending.get(e);a&&(this.pending.delete(e),a.resolve(t))}rejectPending(e,t){if("number"!=typeof e)return;let a=this.pending.get(e);a&&(this.pending.delete(e),a.reject(t))}call(e,t){if(!this.worker)return Promise.reject(Error("FlexSearch worker is not available"));let a=++this.seq,r={id:a,type:e,payload:t};return new Promise((e,t)=>{this.pending.set(a,{resolve:e,reject:t}),this.worker.postMessage(r)})}async loadEmailData(e="all",t=!1){console.log("[SearchManager] FlexSearch disabled - using server-side search")}async waitForIndexing(){if(!(this.indexedCount>0))return new Promise(e=>{this.onIndexed(()=>e())})}isReady(){return this.indexedCount>0}async searchEmails(e,t={}){if(!e||""===e.trim())return{results:[],total:0};await this.waitForIndexing();try{let a=await this.call("search-emails",{query:e,options:t});return{results:a.results||[],total:a.total||0}}catch(e){return console.error("[SearchManager] search failed",e),{results:[],total:0}}}onIndexed(e){this.onIndexedCallback=e,this.indexedCount>0&&e({count:this.indexedCount,threadCount:this.threadCount})}async loadAttachmentData(){try{this.attachmentIndexedCount=0;let{getAttachmentsSearchData:t}=await e.A(657387),a=await t();console.log("[SearchManager] loaded attachment data",{attachments:a.length}),await this.call("replace-attachments",{attachments:a})}catch(e){console.error("[SearchManager] failed to load attachment data",e)}}async waitForAttachmentsIndexing(){if(!(this.attachmentIndexedCount>0))return new Promise(e=>{this.onAttachmentsIndexed(()=>e())})}async searchAttachments(e,t={}){if(!e||""===e.trim())return[];await this.waitForAttachmentsIndexing();try{return await this.call("search-attachments",{query:e,options:t})}catch(e){return console.error("[SearchManager] attachment search failed",e),[]}}onAttachmentsIndexed(e){this.onAttachmentsIndexedCallback=e,this.attachmentIndexedCount>0&&e({count:this.attachmentIndexedCount})}async getThreadById(e){if(!e)return null;await this.waitForIndexing();try{let t=await this.call("get-thread-by-id",{doc_id:e});if(!t.thread)return null;return t}catch(e){return console.error("[SearchManager] getThreadById failed",e),null}}}e.s(["SearchManager",()=>t])},141053,783229,e=>{"use strict";var t=e.i(271645);function a(){let[e,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e=window.matchMedia("(max-width: 900px)");a(e.matches);let t=e=>a(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),e}e.s(["useIsMobile",()=>a],141053);var r=e.i(843476),s=e.i(504383);let i={N908JE:"/aircraft/N908JE-clean.png",N909JE:"/aircraft/N909JE-clean.png",N212JE:"/aircraft/N212JE-clean.png",N120JE:"/aircraft/N120JE-clean.png",N722JE:"/aircraft/N722JE-clean.png",N331JE:"/aircraft/N331JE-clean.png",N7660S:"/aircraft/N7660S-clean.png",N432HF:"/aircraft/N432HF-clean.png"},n="https://assets.getkino.com",o=["#1a73e8","#d93025","#f9ab00","#1e8e3e","#9334e6","#ea4335","#fbbc04","#34a853","#4285f4","#ff6d01"],l=e=>{let t=e.split(" ");return t.length>=2?`${t[0][0]}${t[t.length-1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()},c=e=>{let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return o[Math.abs(t)%o.length]},d=(0,t.memo)(function({flight:e,compact:t=!1,onClick:a,onHover:o,isHovered:d=!1,passengerAvatars:h={}}){let m=new Date(e.departure.datetime),u=m.getFullYear(),p=!isNaN(m.getTime())&&u>=2e3&&u<=2019,g=Math.floor(e.duration_minutes/60),f=e.duration_minutes%60,x=g>0?`${g}h ${f}m`:`${f}m`;return(0,r.jsxs)("div",{className:`flight-card ${t?"compact":""}`,onClick:a,onMouseEnter:()=>o?.(e),onMouseLeave:()=>o?.(null),onTouchStart:()=>o?.(e),children:[(0,r.jsxs)("div",{className:"flight-card-header",children:[(0,r.jsxs)("div",{className:"flight-meta",children:[e.notable&&(0,r.jsx)("i",{className:"material-icons flight-notable-star",title:`Notable: ${e.notablePassengers?.join(", ")}`,children:"star"}),(0,r.jsx)("span",{className:"flight-date",children:p?m.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Date Unknown"}),(0,r.jsxs)("span",{className:"flight-aircraft",children:[i[e.aircraft.registration]&&(0,r.jsx)("img",{src:i[e.aircraft.registration],alt:e.aircraft.registration,className:"aircraft-icon"}),e.aircraft.registration]}),(0,r.jsx)("span",{onClick:e=>e.stopPropagation(),children:(0,r.jsx)(s.ShareToJedditButton,{contentType:"flight",contentId:e.id,title:`Flight: ${e.departure.airport_code} → ${e.arrival.airport_code} (${p?m.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Date Unknown"})`})})]}),0===e.passenger_count&&(0,r.jsx)("span",{className:"empty-leg-badge",children:"Empty Leg"})]}),t?(0,r.jsxs)("div",{className:"flight-card-body",children:[(0,r.jsxs)("div",{className:"flight-route",children:[(0,r.jsxs)("div",{className:"airport-section",children:[(0,r.jsx)("div",{className:"airport-code",children:e.departure.airport_code}),e.departure.airport_name&&(0,r.jsx)("div",{className:"airport-name",children:e.departure.airport_name}),e.departure.time&&(0,r.jsx)("div",{className:"airport-time",children:e.departure.time}),(0,r.jsxs)("div",{className:"airport-city",children:[e.departure.city,e.departure.country&&`, ${e.departure.country}`]})]}),(0,r.jsxs)("div",{className:`flight-line-container ${d?"animated":""}`,children:[(0,r.jsx)("div",{className:"flight-line"}),(0,r.jsx)("div",{className:"flight-line-animated"}),(0,r.jsx)("div",{className:"flight-icon-wrapper",children:(0,r.jsx)("i",{className:"material-icons flight-icon",children:"flight"})}),e.duration_minutes>0&&(0,r.jsx)("div",{className:"flight-duration",children:x})]}),(0,r.jsxs)("div",{className:"airport-section arrival",children:[(0,r.jsx)("div",{className:"airport-code",children:e.arrival.airport_code}),e.arrival.airport_name&&(0,r.jsx)("div",{className:"airport-name",children:e.arrival.airport_name}),e.arrival.time&&(0,r.jsx)("div",{className:"airport-time",children:e.arrival.time}),(0,r.jsxs)("div",{className:"airport-city",children:[e.arrival.city,e.arrival.country&&`, ${e.arrival.country}`]})]})]}),e.passengers.length>0&&(0,r.jsxs)("div",{className:"flight-card-passengers-compact",children:[e.passengers.slice(0,6).map((e,t)=>{let a=h[e.name.toUpperCase()],s=a&&(a.thumbnail||a.photoId),i={};if(a?.photoId&&a.bbox){let e=a.bbox.left+a.bbox.width/2,t=a.bbox.top+a.bbox.height/2,r=Math.max(1,Math.min(1/(2.2*Math.max(a.bbox.width,a.bbox.height)),3));i={transformOrigin:`${100*e}% ${100*t}%`,transform:`scale(${r})`}}let o=a?.thumbnail?a.thumbnail:a?.photoId?`${n}/cdn-cgi/image/fit=cover,width=48,height=48,quality=60,format=auto/photos/${a.photoId}`:null;return(0,r.jsxs)("div",{className:"passenger-badge",children:[(0,r.jsx)("div",{className:`passenger-badge-avatar ${s?"has-photo":""}`,style:s?void 0:{backgroundColor:c(e.name)},children:s&&o?(0,r.jsx)("img",{src:o,alt:e.name,style:a?.photoId?i:void 0}):l(e.name)}),(0,r.jsx)("span",{className:"passenger-badge-name",children:e.name})]},t)}),e.passengers.length>6&&(0,r.jsxs)("div",{className:"passenger-badge more",children:["+",e.passengers.length-6]})]}),e.notes&&(0,r.jsxs)("div",{className:"flight-card-notes",children:[(0,r.jsx)("i",{className:"material-icons",children:"sticky_note_2"}),(0,r.jsx)("span",{children:e.notes})]}),e.source_file&&(0,r.jsx)("div",{className:"flight-card-source",children:(0,r.jsxs)("a",{href:`/drive/${e.source_file}`,target:"_blank",rel:"noopener noreferrer",className:"source-doc-link",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("i",{className:"material-icons",children:"description"}),(0,r.jsx)("span",{children:e.source_file})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flight-route",children:[(0,r.jsxs)("div",{className:"airport-section",children:[(0,r.jsx)("div",{className:"airport-code",children:e.departure.airport_code}),e.departure.airport_name&&(0,r.jsx)("div",{className:"airport-name",children:e.departure.airport_name}),e.departure.time&&(0,r.jsx)("div",{className:"airport-time",children:e.departure.time}),(0,r.jsxs)("div",{className:"airport-city",children:[e.departure.city,e.departure.country&&`, ${e.departure.country}`]})]}),(0,r.jsxs)("div",{className:`flight-line-container ${d?"animated":""}`,children:[(0,r.jsx)("div",{className:"flight-line"}),(0,r.jsx)("div",{className:"flight-line-animated"}),(0,r.jsx)("div",{className:"flight-icon-wrapper",children:(0,r.jsx)("i",{className:"material-icons flight-icon",children:"flight"})}),e.duration_minutes>0&&(0,r.jsx)("div",{className:"flight-duration",children:x})]}),(0,r.jsxs)("div",{className:"airport-section arrival",children:[(0,r.jsx)("div",{className:"airport-code",children:e.arrival.airport_code}),e.arrival.airport_name&&(0,r.jsx)("div",{className:"airport-name",children:e.arrival.airport_name}),e.arrival.time&&(0,r.jsx)("div",{className:"airport-time",children:e.arrival.time}),(0,r.jsxs)("div",{className:"airport-city",children:[e.arrival.city,e.arrival.country&&`, ${e.arrival.country}`]})]})]}),e.passengers.length>0&&(0,r.jsxs)("div",{className:"flight-card-passengers-compact",children:[e.passengers.slice(0,6).map((e,t)=>{let a=h[e.name.toUpperCase()],s=a&&(a.thumbnail||a.photoId),i={};if(a?.photoId&&a.bbox){let e=a.bbox.left+a.bbox.width/2,t=a.bbox.top+a.bbox.height/2,r=Math.max(1,Math.min(1/(2.2*Math.max(a.bbox.width,a.bbox.height)),3));i={transformOrigin:`${100*e}% ${100*t}%`,transform:`scale(${r})`}}let o=a?.thumbnail?a.thumbnail:a?.photoId?`${n}/cdn-cgi/image/fit=cover,width=48,height=48,quality=60,format=auto/photos/${a.photoId}`:null;return(0,r.jsxs)("div",{className:"passenger-badge",children:[(0,r.jsx)("div",{className:`passenger-badge-avatar ${s?"has-photo":""}`,style:s?void 0:{backgroundColor:c(e.name)},children:s&&o?(0,r.jsx)("img",{src:o,alt:e.name,style:a?.photoId?i:void 0}):l(e.name)}),(0,r.jsx)("span",{className:"passenger-badge-name",children:e.name})]},t)}),e.passengers.length>6&&(0,r.jsxs)("div",{className:"passenger-badge more",children:["+",e.passengers.length-6]})]}),e.notes&&(0,r.jsxs)("div",{className:"flight-card-notes",children:[(0,r.jsx)("i",{className:"material-icons",children:"sticky_note_2"}),(0,r.jsx)("span",{children:e.notes})]}),e.source_file&&(0,r.jsx)("div",{className:"flight-card-source",children:(0,r.jsxs)("a",{href:`/drive/${e.source_file}`,target:"_blank",rel:"noopener noreferrer",className:"source-doc-link",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("i",{className:"material-icons",children:"description"}),(0,r.jsx)("span",{children:e.source_file})]})})]}),!t&&(0,r.jsxs)("div",{className:"flight-card-people",children:[e.crew.length>0&&(0,r.jsxs)("div",{className:"flight-people-section",children:[(0,r.jsxs)("div",{className:"people-section-label",children:[(0,r.jsx)("i",{className:"material-icons",children:"badge"}),(0,r.jsx)("span",{children:"Crew"})]}),(0,r.jsx)("div",{className:"people-list",children:e.crew.map((e,t)=>(0,r.jsxs)("div",{className:"person-item",children:[(0,r.jsx)("div",{className:"person-avatar-small",style:{backgroundColor:c(e.name)},children:l(e.name)}),(0,r.jsx)("span",{className:"person-name-inline",children:e.name})]},t))})]}),e.passengers.length>0&&(0,r.jsxs)("div",{className:"flight-people-section",children:[(0,r.jsxs)("div",{className:"people-section-label",children:[(0,r.jsx)("i",{className:"material-icons",children:"people"}),(0,r.jsx)("span",{children:"Passengers"})]}),(0,r.jsx)("div",{className:"people-list",children:e.passengers.map((e,t)=>{let a=h[e.name.toUpperCase()],s=a&&(a.thumbnail||a.photoId),i={};if(a?.photoId&&a.bbox){let e=a.bbox.left+a.bbox.width/2,t=a.bbox.top+a.bbox.height/2,r=Math.max(1,Math.min(1/(2.2*Math.max(a.bbox.width,a.bbox.height)),3));i={transformOrigin:`${100*e}% ${100*t}%`,transform:`scale(${r})`}}let o=a?.thumbnail?a.thumbnail:a?.photoId?`${n}/cdn-cgi/image/fit=cover,width=48,height=48,quality=60,format=auto/photos/${a.photoId}`:null;return(0,r.jsxs)("div",{className:"person-item",children:[(0,r.jsx)("div",{className:`person-avatar-small ${s?"has-photo":""}`,style:s?void 0:{backgroundColor:c(e.name)},children:s&&o?(0,r.jsx)("img",{src:o,alt:e.name,style:a?.photoId?i:void 0}):l(e.name)}),(0,r.jsx)("span",{className:"person-name-inline",children:e.name})]},t)})})]}),e.operator&&(0,r.jsxs)("div",{className:"flight-card-footer",children:[(0,r.jsx)("i",{className:"material-icons",children:"business"}),(0,r.jsx)("span",{children:e.operator.company})]})]})]})}),h=(0,t.memo)(function(){return(0,r.jsxs)("div",{className:"flight-card flight-card-skeleton",children:[(0,r.jsx)("div",{className:"flight-card-header",children:(0,r.jsxs)("div",{className:"flight-meta",children:[(0,r.jsx)("span",{className:"skeleton-box",style:{width:100,height:16}}),(0,r.jsx)("span",{className:"skeleton-box",style:{width:70,height:24,borderRadius:4}})]})}),(0,r.jsxs)("div",{className:"flight-route",children:[(0,r.jsxs)("div",{className:"airport-section",children:[(0,r.jsx)("div",{className:"skeleton-box",style:{width:60,height:28}}),(0,r.jsx)("div",{className:"skeleton-box",style:{width:120,height:12,marginTop:4}}),(0,r.jsx)("div",{className:"skeleton-box",style:{width:80,height:12,marginTop:4}})]}),(0,r.jsxs)("div",{className:"flight-line-container",children:[(0,r.jsx)("div",{className:"flight-line"}),(0,r.jsx)("div",{className:"flight-icon-wrapper",children:(0,r.jsx)("i",{className:"material-icons flight-icon",style:{opacity:.3},children:"flight"})})]}),(0,r.jsxs)("div",{className:"airport-section arrival",children:[(0,r.jsx)("div",{className:"skeleton-box",style:{width:60,height:28}}),(0,r.jsx)("div",{className:"skeleton-box",style:{width:120,height:12,marginTop:4}}),(0,r.jsx)("div",{className:"skeleton-box",style:{width:80,height:12,marginTop:4}})]})]}),(0,r.jsx)("div",{className:"flight-card-passengers-compact",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"passenger-badge",children:[(0,r.jsx)("div",{className:"skeleton-box skeleton-avatar"}),(0,r.jsx)("span",{className:"skeleton-box",style:{width:60,height:12}})]},e))})]})});e.s(["AIRCRAFT_IMAGES",0,i,"FlightCard",0,d,"FlightCardSkeleton",0,h,"PHOTOS_CDN",0,n,"getAvatarColor",0,c,"getInitials",0,l],783229)},811211,633501,260409,e=>{"use strict";var t=e.i(843476),a=e.i(846696);function r({emailId:e,docId:r,variant:s="icon"}){let i=async t=>{t.preventDefault(),t.stopPropagation();let s=`${window.location.origin}/thread/${r}?email=${e}`;try{await navigator.clipboard.writeText(s),a.toast.success("Email link copied")}catch(e){a.toast.error("Failed to copy link")}};return(0,t.jsx)("button",{className:"action-btn link-btn",onClick:i,title:"Copy link to this email",children:(0,t.jsx)("i",{className:"material-icons",children:"link"})})}e.s(["CopyLinkButton",()=>r],811211);var s=e.i(271645),i=e.i(98880),n=e.i(647163);function o({emailId:e,attachmentCount:a}){let[r,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,h]=(0,s.useState)(null),[m,u]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null);(0,s.useEffect)(()=>{(0,i.checkIsAdmin)().then(u)},[]),(0,s.useEffect)(()=>{!async function(){try{let t=await (0,i.getAttachmentsForEmail)(e);o(t)}catch(e){console.error("Failed to fetch attachments:",e)}finally{c(!1)}}()},[e]);let f=async(e,t)=>{if(t.preventDefault(),t.stopPropagation(),m&&!p&&!e.redacted){g(e.id);try{let t=await (0,i.redactAttachment)(e.id);console.log("Redacted:",e.filename,"→",t.description),o(t=>t.map(t=>t.id===e.id?{...t,redacted:!0}:t))}catch(e){console.error("Redaction failed:",e)}finally{g(null)}}},x=async()=>{if(!m||p)return;let e=r.filter(e=>(0,n.isImage)(e.content_type)&&!e.redacted);if(0!==e.length){for(let t of(console.log(`Redacting ${e.length} images...`),e)){g(t.id);try{let e=await (0,i.redactAttachment)(t.id);console.log("Redacted:",t.filename,"→",e.description),o(e=>e.map(e=>e.id===t.id?{...e,redacted:!0}:e))}catch(e){console.error("Failed to redact:",t.filename,e)}}g(null),console.log("Done redacting all images")}};(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&d&&h(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d]);let y=r.length||a,v=r.filter(e=>(0,n.isImage)(e.content_type)&&!e.redacted).length,j=(0,t.jsxs)("div",{className:"email-attachments-header",children:[(0,t.jsxs)("div",{className:"email-attachments-header-left",children:[(0,t.jsxs)("span",{className:"email-attachments-count",children:[y," attachment",y>1?"s":""]}),(0,t.jsx)("span",{className:"email-attachments-meta",children:"• Scanned by Jmail"})]}),m&&v>0&&(0,t.jsx)("button",{className:"redact-all-btn",onClick:x,disabled:!!p,children:p?"Redacting...":`Redact All (${v})`})]});return l||0===r.length?(0,t.jsxs)("div",{className:"email-attachments-section",children:[j,l&&(0,t.jsx)("div",{className:"email-attachments-loading",children:"Loading..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"email-attachments-section",children:[j,(0,t.jsx)("div",{className:"email-attachments-grid",children:r.map(e=>(0,t.jsxs)("a",{href:`/api/attachments/${e.id}`,target:"_blank",rel:"noopener noreferrer",className:`email-attachment-card ${m?"admin-mode":""} ${e.redacted?"redacted":""}`,onClick:t=>{(0,n.isImage)(e.content_type)&&(t.preventDefault(),h(e))},children:[(0,t.jsx)("div",{className:"email-attachment-preview",children:(0,n.isImage)(e.content_type)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:`/api/attachments/${e.id}`,alt:e.filename,loading:"lazy"}),m&&!e.redacted&&(0,t.jsx)("div",{className:`redaction-overlay ${p===e.id?"toggling":""}`,onClick:t=>f(e,t),children:(0,t.jsx)("i",{className:"material-icons",children:"visibility_off"})})]}):(0,t.jsx)("div",{className:"email-attachment-icon-large",children:(0,t.jsx)("i",{className:"material-icons",children:(0,n.getFileIcon)(e.content_type)})})}),(0,t.jsxs)("div",{className:"email-attachment-footer",children:[(0,t.jsx)("div",{className:"email-attachment-type-icon",children:(0,t.jsx)("i",{className:"material-icons",children:(0,n.getFileIcon)(e.content_type)})}),(0,t.jsxs)("div",{className:"email-attachment-details",children:[(0,t.jsx)("div",{className:"email-attachment-name",title:e.filename,children:e.filename}),(0,t.jsx)("div",{className:"email-attachment-size",children:(0,n.formatFileSize)(e.size)})]})]})]},e.id))})]}),d&&(0,t.jsxs)("div",{className:"lightbox-overlay",onClick:()=>h(null),children:[(0,t.jsx)("button",{className:"lightbox-close",onClick:()=>h(null),children:(0,t.jsx)("i",{className:"material-icons",children:"close"})}),(0,t.jsxs)("div",{className:"lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("img",{src:`/api/attachments/${d.id}`,alt:d.filename}),(0,t.jsxs)("div",{className:"lightbox-info",children:[(0,t.jsx)("span",{className:"lightbox-filename",children:d.filename}),(0,t.jsx)("div",{className:"lightbox-actions",children:(0,t.jsxs)("a",{href:`/api/attachments/${d.id}`,download:d.filename,className:"lightbox-download",children:[(0,t.jsx)("i",{className:"material-icons",children:"download"}),"Download"]})})]})]})]})]})}function l({annotation:e,position:a,onClose:r}){var s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[999]",onClick:r}),(0,t.jsxs)("div",{className:"annotation-tooltip",style:{left:`${a.x}px`,top:`${a.y}px`},children:[(0,t.jsxs)("div",{className:"source-header",children:[(0,t.jsx)("span",{className:"source-icon",children:function(e){switch(e){case"reddit":return"r/";case"twitter":return"@";default:return""}}(e.sourceType)}),(0,t.jsx)("span",{className:"source-name",children:e.sourceName}),e.publishedAt&&(0,t.jsx)("span",{className:"source-date",children:(s=e.publishedAt)?("string"==typeof s?new Date(s):s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""})]}),e.title&&(0,t.jsx)("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"coverage-title",children:e.title}),e.author&&(0,t.jsxs)("div",{className:"coverage-author",children:["By ",e.author]}),e.highlightedText&&(0,t.jsxs)("div",{className:"highlighted-quote",children:["“",e.highlightedText.slice(0,150),e.highlightedText.length>150?"...":"","”"]}),(0,t.jsxs)("div",{className:"tooltip-footer",children:[(0,t.jsx)("span",{className:"match-type",children:"url_extracted"===e.matchType?"Direct link":"ai_matched"===e.matchType?`AI match (${Math.round(100*(e.matchConfidence||0))}%)`:"manual"===e.matchType?"Manual":e.sourceType}),e.sourceUrl&&(0,t.jsx)("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"view-article",children:"View source →"})]})]})]})}function c({annotations:e}){let[a,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)({x:0,y:0}),[o,c]=(0,s.useState)(null),d=(0,s.useRef)(null),h=(0,s.useCallback)(t=>{if(t.stopPropagation(),d.current){let e=d.current.getBoundingClientRect();n({x:e.left+window.scrollX,y:e.bottom+window.scrollY+8})}c(e[0]),r(!0)},[e]),m=(0,s.useCallback)(()=>{r(!1),c(null)},[]);return 0===e.length?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{ref:d,className:"annotation-badge",onClick:h,title:`${e.length} media reference${e.length>1?"s":""}`,children:e.length}),a&&o&&(0,t.jsx)(l,{annotation:o,position:i,onClose:m})]})}function d({contentHtml:e,annotations:a,className:r=""}){let s=a.length>0;return(0,t.jsxs)("div",{className:`annotated-content-wrapper ${r}`,children:[(0,t.jsx)("div",{className:"message-content",dangerouslySetInnerHTML:{__html:(0,n.annotateRedactionBlocks)(e)}}),s&&(0,t.jsxs)("div",{className:"annotation-indicator",children:[(0,t.jsx)(c,{annotations:a}),(0,t.jsxs)("span",{className:"annotation-label",children:[a.length," media reference",a.length>1?"s":""]})]})]})}e.s(["EmailAttachments",()=>o],633501),e.s(["AnnotatedContent",()=>d],260409)},890090,e=>{"use strict";var t=e.i(875296);function a(){return t.FEATURE_YAHOO_INBOX?"all":"gmail"}e.s(["getDefaultSource",()=>a])},657387,e=>{e.v(t=>Promise.all(["static/chunks/66d9a1b6c74b31b4.js"].map(t=>e.l(t))).then(()=>t(766356)))},774871,e=>{e.v(t=>Promise.all(["static/chunks/6878d3a549247cfd.js","static/chunks/99df8df9d3ec6064.css"].map(t=>e.l(t))).then(()=>t(894970)))},538166,e=>{e.v(t=>Promise.all(["static/chunks/d2bfc10c88c5b822.js","static/chunks/786048723906df44.js","static/chunks/67eb4e610871fbc8.js"].map(t=>e.l(t))).then(()=>t(719820)))}]);